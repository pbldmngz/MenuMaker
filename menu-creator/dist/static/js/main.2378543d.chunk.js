(this["webpackJsonpmenu-creator"]=this["webpackJsonpmenu-creator"]||[]).push([[0],{228:function(e,t,n){},431:function(e,t,n){"use strict";n.r(t);var a=n(8),i=n(3),r=n.n(i),c=n(93),s=n.n(c),o=(n(228),n(222)),l=n(6),u=n(95),d=n(28),b=n(29),p=n(31),h=n(30),j=n(15),m=n(145),f=n.n(m),O=n(44),g=n.n(O),v=n(96),x=function(e,t){return function(){var n=Object(v.a)(g.a.mark((function n(a,i,r){var c,s;return g.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r.getFirebase,c=r.getFirestore,n.next=3,y(a,c,e,"owner",t);case 3:return s=n.sent,n.abrupt("return",s);case 5:case"end":return n.stop()}}),n)})));return function(e,t,a){return n.apply(this,arguments)}}()},y=function(){var e=Object(v.a)(g.a.mark((function e(t,n,i,r,c){var s,o,l,u;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=n(),o=s.collection(i).where(r,"==",c),e.next=4,o.get();case 4:return l=e.sent,u=[],l.empty||l.forEach((function(e){u.push(Object(a.a)(Object(a.a)({},e.data()),{},{id:e.id}))})),e.abrupt("return",u);case 8:case"end":return e.stop()}}),e)})));return function(t,n,a,i,r){return e.apply(this,arguments)}}(),N=n(2);var C=Object(j.b)((function(e){return{auth:e.firebase.auth,profile:e.firebase.profile}}))(Object(l.g)((function(e){var t=e.data;return Object(N.jsxs)("div",{className:"navbar",children:[Object(N.jsx)("img",{src:t?t.logoURL:"",alt:"Logo",className:"logo"}),Object(N.jsx)("h1",{className:"logo-tipo",children:t?t.name:""})]})}))),E=function(e){var t=e.items;return Object(N.jsxs)("div",{className:"category-container category-padding-full",children:[Object(N.jsx)("h4",{children:t.title}),Object(N.jsx)("center",{children:Object(N.jsx)("div",{className:"divider-solid-yellow"})}),t&&t.data.map((function(e,t){return Object(N.jsxs)("div",{className:"item-container item-margin-bottom",children:[Object(N.jsx)("div",{className:"item-name",children:e.name}),Object(N.jsx)("div",{className:"item-price",children:"$"+e.price}),Object(N.jsx)("div",{className:"item-description",children:e.description})]},t)}))]})};var S=Object(j.b)((function(e){return{auth:e.firebase.auth,profile:e.firebase.profile}}),(function(e){return{signOut:function(){return e((function(e,t,n){(0,n.getFirebase)().auth().signOut().then((function(){e({type:"SIGNOUT_SUCCESS"})}))}))}}}))(Object(l.g)((function(e){var t=e.auth;return Object(N.jsx)("div",{className:"",children:Object(N.jsx)("footer",{className:"footer",children:t.uid?Object(N.jsx)("div",{className:"material-icons button",onClick:function(){e.signOut()},children:"logout"}):Object(N.jsx)("div",{className:"material-icons button",onClick:function(){e.history.push("/auth/login")},children:"login"})})})}))),w=function(e){Object(p.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(d.a)(this,n);for(var a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return(e=t.call.apply(t,[this].concat(i))).state={items:[],categories:[]},e.fetchData=function(){var t=e.props,n=t.match,a=t.getByUser,i=t.getIdByName;n.params.userID&&i(n.params.userID).then((function(t){a("items",t[0].id).then((function(t){e.setState({items:t})})),a("categories",t[0].id).then((function(t){e.setState({categories:t})})),e.setState({menuData:t[0]})}))},e.getCategory=function(t){return e.state.categories.find((function(e){return e.id===t}))},e}return Object(b.a)(n,[{key:"componentDidMount",value:function(){this.fetchData()}},{key:"separateCategories",value:function(e){var t,n={},a=[],i=Object(u.a)(e);try{for(i.s();!(t=i.n()).done;){var r=t.value;r.category_id in n?r.visible&&n[r.category_id].push(r):r.visible&&(n[r.category_id]=[],n[r.category_id].push(r))}}catch(d){i.e(d)}finally{i.f()}for(var c=0,s=Object.keys(n);c<s.length;c++){var o=s[c],l=this.getCategory(o);l&&l.visible&&a.push({title:l.name.toUpperCase(),data:n[o]})}return a}},{key:"render",value:function(){var e=this.separateCategories(this.state.items);return Object(N.jsxs)("div",{children:[Object(N.jsx)(C,{data:this.state.menuData}),Object(N.jsx)(m.ResponsiveMasonry,{columnsCountBreakPoints:{350:1,750:2,900:3},children:Object(N.jsx)(f.a,{children:e&&e.map((function(e,t){return Object(N.jsx)(E,{items:e},t)}))})}),Object(N.jsx)(S,{})]})}}]),n}(i.Component),I=Object(j.b)((function(e){return{profile:e.firebase}}),(function(e){return{getIdByName:function(t){return e(function(e){return function(){var t=Object(v.a)(g.a.mark((function t(n,a,i){var r,c;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i.getFirebase,r=i.getFirestore,t.next=3,y(n,r,"menuConfig","path",e);case 3:return c=t.sent,t.abrupt("return",c);case 5:case"end":return t.stop()}}),t)})));return function(e,n,a){return t.apply(this,arguments)}}()}(t))},getByUser:function(t,n){return e(x(t,n))}}}))(w),R=n(54),_=function(e){Object(p.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(d.a)(this,n);for(var a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return(e=t.call.apply(t,[this].concat(i))).state={email:"",password:""},e.handleChange=function(t){e.setState(Object(R.a)({},t.target.id,t.target.value))},e.handleSubmit=function(t){t.preventDefault(),e.props.signIn(e.state)},e.listenEnter=function(t){13===t.keyCode&&e.handleSubmit(t)},e}return Object(b.a)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.authError;return t.auth.uid?Object(N.jsx)(l.a,{to:"/cpanel"}):Object(N.jsx)("div",{className:"center-box xpand white",children:Object(N.jsxs)("div",{className:"",children:[Object(N.jsxs)("div",{className:"padre-titulo",children:[Object(N.jsx)("div",{className:"titulo"}),Object(N.jsx)("div",{className:"titulo"})]}),Object(N.jsx)("form",{className:"",onSubmit:this.handleSubmit,children:Object(N.jsxs)("div",{className:"form-1 white",children:[Object(N.jsxs)("div",{className:"form-2",children:[Object(N.jsxs)("div",{className:"input-field",children:[Object(N.jsx)("label",{className:"uname",htmlFor:"email"}),Object(N.jsx)("input",{onKeyDown:function(t){return e.listenEnter(t)},type:"email",id:"email",placeholder:"Correo",onChange:this.handleChange})]}),Object(N.jsxs)("div",{className:"input-field",children:[Object(N.jsx)("label",{htmlFor:"password"}),Object(N.jsx)("input",{onKeyDown:function(t){return e.listenEnter(t)},type:"password",id:"password",placeholder:"Contrase\xf1a",onChange:this.handleChange})]})]}),Object(N.jsx)("div",{className:"footer-single",children:n?Object(N.jsx)("p",{children:n}):null}),Object(N.jsx)("div",{className:"footer-single",children:Object(N.jsx)("button",{className:"add-question",children:"Iniciar sesi\xf3n"})})]})})]})})}}]),n}(i.Component),k=Object(j.b)((function(e){return{authError:e.auth.authError,auth:e.firebase.auth}}),(function(e){return{signIn:function(t){return e((n=t,function(e,t,a){(0,a.getFirebase)().auth().signInWithEmailAndPassword(n.email,n.password).then((function(){e({type:"LOGIN_SUCCESS"})})).catch((function(t){e({type:"LOGIN_ERROR",err:t})}))}));var n}}}))(_),F=function(e){Object(p.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(d.a)(this,n);for(var a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return(e=t.call.apply(t,[this].concat(i))).state={email:"",password:"",nombre:"",lang:"english"},e.handleChange=function(t){e.setState(Object(R.a)({},t.target.id,t.target.value))},e.handleSubmit=function(t){t.preventDefault(),e.props.signUp(e.state)},e}return Object(b.a)(n,[{key:"render",value:function(){var e=this.props,t=e.auth,n=e.authError;e.profile,e.lang,e.userLevel;return t.uid?Object(N.jsx)(l.a,{to:"/menu/"+t.uid}):Object(N.jsxs)("div",{className:"",children:[Object(N.jsxs)("div",{className:"padre-titulo mobile",children:[Object(N.jsx)("div",{className:"titulo destroy-on-mobile"}),Object(N.jsx)("div",{className:"titulo",children:Object(N.jsx)("h2",{className:"titulo",children:"Registrar"})})]}),Object(N.jsx)("div",{className:"form-1",children:Object(N.jsx)("div",{className:"form-2",children:Object(N.jsxs)("form",{className:"",onSubmit:this.handleSubmit,children:[Object(N.jsxs)("div",{className:"input-field",children:[Object(N.jsx)("label",{htmlFor:"nombre"}),Object(N.jsx)("input",{autoComplete:"off",autoCorrect:"off",spellCheck:"off",type:"email",id:"nombre",placeholder:"Nombre",onChange:this.handleChange})]}),Object(N.jsxs)("div",{className:"input-field",children:[Object(N.jsx)("label",{htmlFor:"email"}),Object(N.jsx)("input",{autoComplete:"off",autoCorrect:"off",spellCheck:"off",type:"email",id:"email",placeholder:"Correo",onChange:this.handleChange})]}),Object(N.jsxs)("div",{className:"input-field",children:[Object(N.jsx)("label",{htmlFor:"password"}),Object(N.jsx)("input",{autoComplete:"off",autoCorrect:"off",spellCheck:"off",type:"password",id:"password",placeholder:"Contrase\xf1a",onChange:this.handleChange})]})]})})}),Object(N.jsx)("div",{className:"footer-single margin-top",children:Object(N.jsx)("button",{onClick:this.handleSubmit,className:"add-question",children:"Registrar"})}),Object(N.jsx)("div",{className:"footer-single",children:n?Object(N.jsx)("p",{children:n}):null})]})}}]),n}(i.Component),T=Object(j.b)((function(e){return{auth:e.firebase.auth,profile:e.firebase.profile}}),(function(e){return{signUp:function(t){return e(function(e){return function(t,n,a){var i=a.getFirebase,r=a.getFirestore,c=i(),s=r();c.auth().createUserWithEmailAndPassword(e.email,e.password).then((function(t){return s.collection("menuConfig").doc(t.user.uid).set({colorPalette:{header:"#e2b22b",title:"#262626",blockTitle:"#e2b22b",background:"#1b1b1b",category:"#262626",text:"beige"},name:"default",path:t.user.uid,logoURL:"https://chaitanyahr.com/wp-content/uploads/2015/02/logo_dummy.png"}),s.collection("users").doc(t.user.uid).set({name:e.nombre,subscribed:!1})})).then((function(){t({type:"SIGNUP_SUCCESS"})})).catch((function(e){t({type:"SIGNUP_ERROR",err:e})}))}}(t))}}}))(Object(l.g)(F)),U=function(e){Object(p.a)(n,e);var t=Object(h.a)(n);function n(){return Object(d.a)(this,n),t.apply(this,arguments)}return Object(b.a)(n,[{key:"render",value:function(){var e=this;return Object(N.jsxs)("div",{children:[Object(N.jsx)("div",{className:"panel-nav",children:Object(N.jsx)("h2",{children:"CONTROL PANEL"})}),Object(N.jsxs)("div",{className:"panel-grid",children:[Object(N.jsxs)("div",{className:"panel-section",children:[Object(N.jsx)("div",{className:"panel-nav panel-section-border letter-spacing",children:"MENU"}),Object(N.jsx)("div",{className:"panel-section-border button",onClick:function(){e.props.history.push("cpanel/categories")},children:"Categories"}),Object(N.jsx)("div",{className:"panel-section-border button",onClick:function(){e.props.history.push("cpanel/items")},children:"Items"})]}),Object(N.jsxs)("div",{className:"panel-section",children:[Object(N.jsx)("div",{className:"panel-nav panel-section-border letter-spacing",children:"USER"}),Object(N.jsx)("div",{className:"panel-section-border",children:"Share link"}),Object(N.jsx)("div",{className:"panel-section-border",children:"Disable ads"}),Object(N.jsx)("div",{className:"panel-section-border",children:"Log out"})]}),Object(N.jsxs)("div",{className:"panel-section",children:[Object(N.jsx)("div",{className:"panel-nav panel-section-border letter-spacing",children:"SETTINGS"}),Object(N.jsx)("div",{className:"panel-section-border",children:"Change display name"}),Object(N.jsx)("div",{className:"panel-section-border",children:"Change web address"}),Object(N.jsx)("div",{className:"panel-section-border",children:"Change color palette"}),Object(N.jsx)("div",{className:"panel-section-border",children:"Change brand logo"})]})]}),Object(N.jsx)("div",{className:"as-footer",children:Object(N.jsx)("div",{className:" panel-section-border button",onClick:function(){e.props.history.push("/menu/rimuru")},children:"Go to your menu"})})]})}}]),n}(i.Component),D=n(35),A=n.n(D),P=function(e){Object(p.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(d.a)(this,n);for(var i=arguments.length,r=new Array(i),c=0;c<i;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={items:[],categories:[]},e.fetchData=function(){var t=e.props,n=t.auth,a=t.getByUser;n.uid&&(a("items",n.uid).then((function(t){e.setState({items:t})})),a("categories",n.uid).then((function(t){e.setState({categories:t})})))},e.popup=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,a="";if("items"!==t)a='<input type="text" id="cat_name" class="swal2-input" placeholder="Name" value="'.concat(n?n.name:"Name",'" />');else{a+='<input type="text" id="p_name" class="swal2-input" placeholder="Name" value="'.concat(n?n.name:"",'" />'),a+='<input type="text" id="p_price" class="swal2-input" placeholder="Price" value="'.concat(n?n.price:"",'" />');var i,r='<option value="" disabled selected hidden>Select category</option>',c=Object(u.a)(e.state.categories);try{for(c.s();!(i=c.n()).done;){var s=i.value;n&&n.category_id===s.id?r+='<option selected value="'+s.id+'">'+s.name+"</option>":r+='<option value="'+s.id+'">'+s.name+"</option>"}}catch(o){c.e(o)}finally{c.f()}a+='<select class="swal2-input edited" id="p_category">'+r+"</select>",a+='<input type="text" id="p_description" class="swal2-input" placeholder="Description" value="'.concat(n?n.description:"",'" />')}A.a.fire({title:"".concat(n?"Edit":"Add"," ").concat(t),html:a,confirmButtonText:n?"Save":"Add",focusConfirm:!1,preConfirm:function(){return"items"===t?{name:A.a.getPopup().querySelector("#p_name").value,price:A.a.getPopup().querySelector("#p_price").value,category_id:A.a.getPopup().querySelector("#p_category").value,description:A.a.getPopup().querySelector("#p_description").value}:{name:A.a.getPopup().querySelector("#cat_name").value}}}).then((function(a){console.log("This is the result",a),a.value&&(n?"items"!==t?e.props.editCategory(n.id,a.value):e.props.editItem(n.id,a.value):"items"!==t?e.props.createCategory(a.value):e.props.createItem(a.value),e.fetchData(),console.log("Should be before"),A.a.fire('"'.concat(a.value.name,'" ').concat(n?"edited":"added","!").trim()))})).catch((function(e){console.log("Error in swal2",e)}))},e.getCategory=function(t){var n=e.state.categories.find((function(e){return e.id===t}));return n?n.name:""},e.changeVisibility=function(t,n){var i=Object(a.a)({},n);delete i.id,"items"===t?e.props.editItem(n.id,Object(a.a)(Object(a.a)({},i),{},{visible:!n.visible})):e.props.editCategory(n.id,Object(a.a)(Object(a.a)({},i),{},{visible:!n.visible})),e.fetchData()},e.delete=function(t,n){"items"===t?e.props.deleteItem(n):e.props.deleteCategory(n),e.fetchData()},e.getCards=function(t,n){return Object(N.jsxs)("div",{className:"grid",children:[Object(N.jsx)("div",{className:"category-container button button-height",onClick:function(){e.popup(t)},children:Object(N.jsx)("div",{className:"category-center",children:"items"===t?Object(N.jsx)("div",{className:"material-icons big-icon",children:"post_add"}):Object(N.jsx)("div",{className:"material-icons big-icon",children:"library_add"})})}),n&&n.map((function(n){return Object(N.jsx)("div",{className:"category-container category-padding",children:Object(N.jsxs)("div",{className:"item-container",children:["items"===t?Object(N.jsx)("div",{className:"item-name",children:Object(N.jsxs)("div",{className:"item-container item-container-height",children:[Object(N.jsx)("div",{className:"item-name",children:n.name}),Object(N.jsx)("div",{className:"item-price item-margin-right",children:"$"+n.price}),Object(N.jsx)("div",{className:"item-category",children:e.getCategory(n.category_id)}),Object(N.jsx)("div",{className:"item-description",children:n.description})]})}):Object(N.jsx)("div",{className:"item-name item-container-height",children:Object(N.jsx)("div",{className:"category-center",children:n.name})}),Object(N.jsx)("div",{className:"item-price",children:Object(N.jsx)("div",{className:"category-center",children:Object(N.jsxs)("div",{className:"vertical-grid",children:[Object(N.jsx)("span",{className:"material-icons button",onClick:function(){e.changeVisibility(t,n)},children:n.visible?"visibility":"visibility_off"}),Object(N.jsx)("span",{className:"material-icons",onClick:function(){e.popup(t,n)},children:"edit"}),Object(N.jsx)("span",{className:"material-icons button",onClick:function(){e.delete(t,n.id)},children:"delete"})]})})})]})},n.id)}))]})},e}return Object(b.a)(n,[{key:"componentDidMount",value:function(){this.fetchData()}},{key:"render",value:function(){var e=this,t=(this.props.uid,this.state),n=t.items,a=t.categories,i=this.props.match.params.title;return["items","categories"].includes(i)?Object(N.jsxs)("div",{children:[Object(N.jsx)("div",{className:"panel-nav",children:Object(N.jsxs)("h2",{children:["CONTROL PANEL / ",i.toUpperCase()]})}),this.getCards(i,"items"===i?n:a),Object(N.jsx)("div",{className:"as-footer",children:Object(N.jsx)("div",{className:" panel-section-border button",onClick:function(){e.props.history.push("/cpanel")},children:"Go back to Control Panel"})})]}):null}}]),n}(i.Component),G=Object(j.b)((function(e){return{auth:e.firebase.auth}}),(function(e){return{getByUser:function(t,n){return e(x(t,n))},createItem:function(t){return e(function(e){return function(t,n,i){i.getFirebase;var r=(0,i.getFirestore)(),c=n().firebase.auth.uid;r.collection("items").add(Object(a.a)(Object(a.a)({},e),{},{visible:!0,owner:c})).then((function(){t({type:"CREATE_ITEM"},e)})).catch((function(e){t({type:"CREATE_ITEM_ERROR"},e)}))}}(t))},editItem:function(t,n){return e(function(e,t){return function(n,i,r){r.getFirebase,(0,r.getFirestore)().collection("items").doc(e).update(Object(a.a)({},t)).then((function(){n({type:"EDIT_ITEM"},t)})).catch((function(e){n({type:"EDIT_ITEM_ERROR"},e)}))}}(t,n))},deleteItem:function(t){return e(function(e){return function(t,n,a){a.getFirebase,(0,a.getFirestore)().collection("items").doc(e).delete()}}(t))},createCategory:function(t){return e(function(e){return function(t,n,i){i.getFirebase;var r=(0,i.getFirestore)(),c=(n().firebase.profile,n().firebase.auth.uid);r.collection("categories").add(Object(a.a)(Object(a.a)({},e),{},{visible:!0,owner:c})).then((function(){t({type:"CREATE_CATEGORY"},e)})).catch((function(e){t({type:"CREATE_CATEGORY_ERROR"},e)}))}}(t))},editCategory:function(t,n){return e(function(e,t){return function(n,i,r){r.getFirebase,(0,r.getFirestore)().collection("categories").doc(e).update(Object(a.a)({},t)).then((function(){n({type:"EDIT_CATEGORY"},t)})).catch((function(e){n({type:"EDIT_CATEGORY_ERROR"},e)}))}}(t,n))},deleteCategory:function(t){return e(function(e){return function(t,n,a){a.getFirebase,(0,a.getFirestore)().collection("categories").doc(e).delete()}}(t))}}}))(P);var L=function(){return Object(N.jsx)("div",{className:"",children:Object(N.jsx)(o.a,{children:Object(N.jsxs)(l.d,{children:[Object(N.jsx)(l.b,{exact:!0,path:"/auth/login",component:k}),Object(N.jsx)(l.b,{exact:!0,path:"/auth/register",component:T}),Object(N.jsx)(l.b,{exact:!0,path:"/menu/:userID",component:I}),Object(N.jsx)(l.b,{exact:!0,path:"/cpanel",component:U}),Object(N.jsx)(l.b,{exact:!0,path:"/cpanel/:title",component:G})]})})})},B=n(69),M={authError:null},q=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:M,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOGIN_ERROR":return console.log("login error"),Object(a.a)(Object(a.a)({},e),{},{authError:"Login failed"});case"LOGIN_SUCCESS":return console.log("login success"),Object(a.a)(Object(a.a)({},e),{},{authError:null});case"SIGNOUT_SUCCESS":return console.log("signout success"),e;case"SIGNUP_SUCCESS":return console.log("signup success"),Object(a.a)(Object(a.a)({},e),{},{authError:null});case"SIGNUP_ERROR":return console.log("signup error"),Object(a.a)(Object(a.a)({},e),{},{authError:t.err.message});default:return e}},Y=n(55),z=n(43),K=Object(B.b)({auth:q,firestore:Y.firestoreReducer,firebase:z.firebaseReducer}),J=n(223),V=n(97);n(432),n(426),n(428);V.a.initializeApp({apiKey:"AIzaSyCT28ZoGrpsYlrqzT6lL138Uw6veneaU8M",authDomain:"restaurant-menu-creator.firebaseapp.com",projectId:"restaurant-menu-creator",storageBucket:"restaurant-menu-creator.appspot.com",messagingSenderId:"501286966576",appId:"1:501286966576:web:c08a624851a2e67f8fe4f5",measurementId:"G-76MB4Z12PB"}),V.a.firestore().settings({timestampsInSnapshots:!0});var W=V.a,Z=Object(B.c)(K,Object(B.a)(J.a.withExtraArgument({getFirebase:z.getFirebase,getFirestore:Y.getFirestore}))),$={firebase:W,config:{userProfile:"users"},dispatch:Z.dispatch,createFirestoreInstance:Y.createFirestoreInstance};function H(e){var t=e.children,n=Object(j.c)((function(e){return e.firebase.auth}));return Object(z.isLoaded)(n)?t:null}s.a.render(Object(N.jsx)(j.a,{store:Z,children:Object(N.jsx)(z.ReactReduxFirebaseProvider,Object(a.a)(Object(a.a)({},$),{},{children:Object(N.jsx)(H,{children:Object(N.jsx)(r.a.StrictMode,{children:Object(N.jsx)(L,{})})})}))}),document.getElementById("root"))}},[[431,1,2]]]);
//# sourceMappingURL=main.2378543d.chunk.js.map